"use strict";(()=>{var f=Object.defineProperty;var g=(s,t,e)=>t in s?f(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var a=(s,t,e)=>g(s,typeof t!="symbol"?t+"":t,e);var u={"kangaroo-game":{name:"Kangaroo-Game",path:"tracks/kangaroo-game.js"}};var h=u,n=class{constructor(t){a(this,"data",{});a(this,"bufferCache",{});a(this,"baseURL");this.baseURL=t}static async _register(t,e){let o=t.toLowerCase().replace(/ /g,"-"),r=new CustomEvent("af-audio-loaded-".concat(o),{detail:{name:t,slug:o,data:e}});document.dispatchEvent(r)}load(t){return this.get(t)?this.getLoaded(t)?Promise.resolve(this.getLoaded(t)):new Promise((e,o)=>{if(!this.get(t))return o("Track not found");let r=document.createElement("script");r.src=this.baseURL+this.get(t).path,r.async=!0;let i=l=>{let c=l.detail;this.data[t]=c,document.removeEventListener("af-audio-loaded-".concat(t),i),document.head.removeChild(r),e(c)};document.addEventListener("af-audio-loaded-".concat(t),i),r.onerror=()=>{o("error loading script")},document.head.appendChild(r)}):Promise.reject("Track not found")}getAll(){return h}get(t){return h[t]}getLoaded(t){return this.data[t]}getAllLoaded(){return this.data}};var d=class{constructor(t){a(this,"audioCtx",new AudioContext);a(this,"source",null);a(this,"isStarted",!1);a(this,"tracks");this.tracks=new n(t)}async load(t){if(!this.tracks.get(t)){console.error("Track not found");return}try{let i=await this.tracks.load(t);for(var e=atob(i.data.split(",")[1]),o=new Uint8Array(e.length),r=0;r<e.length;r++)o[r]=e.charCodeAt(r);this.audioCtx.decodeAudioData(o.buffer).then(this.loadSource.bind(this)).catch(this.handleError.bind(this))}catch(i){this.handleError(i)}}loadSource(t){this.source=this.audioCtx.createBufferSource(),this.source.buffer=t,this.source.connect(this.audioCtx.destination)}handleError(t){console.error("Error decoding audio data:",t)}start(){this.source&&(this.source.start(),this.isStarted=!0)}stop(){this.source&&(this.source.stop(),this.isStarted=!1)}};window.AFPlayer=d;window.AFTracks=n;console.log("Audio Framework loaded");})();
//# sourceMappingURL=index.js.map
