"use strict";(()=>{var m=Object.defineProperty;var g=(n,t,e)=>t in n?m(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>g(n,typeof t!="symbol"?t+"":t,e);var l={"kangaroo-game":{name:"Kangaroo-Game",path:"tracks/kangaroo-game.js"}};var f=l,i=class{constructor(t){o(this,"data",{});o(this,"bufferCache",{});o(this,"baseURL");this.baseURL=t}static async _register(t,e){let s=t.toLowerCase().replace(/ /g,"-"),r=new CustomEvent("af-audio-loaded-".concat(s),{detail:{name:t,slug:s,data:e}});document.dispatchEvent(r)}load(t){return this.get(t)?this.getLoaded(t)?Promise.resolve(this.getLoaded(t)):new Promise((e,s)=>{if(!this.get(t))return s("Track not found");let r=new URL(this.baseURL);r.pathname=this.get(t).path;let a=document.createElement("script");a.src=r.toString(),a.async=!0;let u=c=>{let h=c.detail;this.data[t]=h,document.removeEventListener("af-audio-loaded-".concat(t),u),document.head.removeChild(a),e(h)};document.addEventListener("af-audio-loaded-".concat(t),u),a.onerror=c=>{s(c)},document.head.appendChild(a)}):Promise.reject("Track not found")}getAll(){return f}get(t){return f[t]}getLoaded(t){return this.data[t]}getAllLoaded(){return this.data}};var d=class{constructor(t){o(this,"audioCtx",new AudioContext);o(this,"source",null);o(this,"isStarted",!1);o(this,"tracks");this.tracks=new i(t)}async load(t){if(!this.tracks.get(t)){console.error("Track not found");return}try{let a=await this.tracks.load(t);for(var e=atob(a.data.split(",")[1]),s=new Uint8Array(e.length),r=0;r<e.length;r++)s[r]=e.charCodeAt(r);this.audioCtx.decodeAudioData(s.buffer).then(this.loadSource.bind(this)).catch(this.handleError.bind(this))}catch(a){this.handleError(a)}}loadSource(t){this.source=this.audioCtx.createBufferSource(),this.source.buffer=t,this.source.connect(this.audioCtx.destination)}handleError(t){console.error("Error decoding audio data:",t)}start(){this.source&&(this.source.start(),this.isStarted=!0)}stop(){this.source&&(this.source.stop(),this.isStarted=!1)}};window.AFPlayer=d;window.AFTracks=i;console.log("Audio Framework loaded");})();
//# sourceMappingURL=index.js.map
